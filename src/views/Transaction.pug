extends templates/header.pug

block content
  include templates/nav.pug
  .transaction-page
    h1="Transaction"

    include templates/add-transaction.pug

    table.table
      thead 
        th="Amount"
        th="Date" 
        th="Note"
        th="Category"
        th=""
        th=""
      each transaction,idx in transactions 
        tr 
          each field, index in transaction
            if index > 1 && index < 6
              td=field
          td
            button.btn.btn-primary(type="button" data-bs-toggle="modal" data-bs-target=`#deleteModal${idx}`) Remove
            .modal.fade(id=`deleteModal${idx}` tabindex="-1" aria-labelledby=`deleteModalLabel${idx}` aria-hidden="true")
              .modal-dialog.modal-dialog-centered
                .modal-content
                  .modal-header
                    h5(class="modal-title" id="deleteModalLabel") Remove Transaction
                    button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
                  .modal-body
                    h3="Are you sure?"
                    form(class="remove-transaction-form" action="/transaction/remove" method="post")
                      input(type="hidden" name="ID" value=transaction[0])
                      input(type="hidden" name="type" value=transaction[1])
                      input(type="hidden" name="category" value=transaction[5])
                      input(type="submit" value="Remove")
          td
            button.btn.btn-primary(type="button" data-bs-toggle="modal" data-bs-target=`#editModal${idx}`) Edit
            .modal.fade(id=`editModal${idx}` tabindex="-1" aria-labelledby=`editModalLabel${idx}` aria-hidden="true")
              .modal-dialog.modal-dialog-centered
                .modal-content
                  .modal-header
                    h5(class="modal-title" id="editModalLabel") Edit Transaction
                    button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
                  .modal-body
                    form(class="edit-transaction-form" action="/transaction/edit" method="post")
                      input(type="hidden" name="ID" value=transaction[0])
                      input(type="hidden" name="type" value=transaction[1])
                      input(type="hidden" name="category" value=transaction[5])
                      input(type="hidden" name="date" value=transaction[3])
                      input(type="hidden" name="note" value=transaction[4])
                      input(type="amount" name="amount" placeholder="amount")
                      input(type="submit" value="Edit")
      else 
        tr No transactions

  